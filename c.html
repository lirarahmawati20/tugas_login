< !DOCTYPE html >
    <
    html lang = "id" >
    <
    head >
    <meta charset = "UTF-8" >
    <meta http - equiv = "X-UA-Compatible"
content = "IE=edge" >
    <meta name = "viewport"
content = "width=device-width, initial-scale=1.0" >
    <
    link rel = "stylesheet"
href = "../css/stylelogin.css" >
    <
    link rel = "shortcut icon"
href = "#" >
    <
    title > Login < /title> <
    /head> <
    body >
    <div class = "login-box" >
    <img src = "../foto/pngtree-chef-food-png-image_5606791.jpg"
class = "avatar" >
    <h1 > Login Here < /h1>
         <form action = "index.html"method = "post"name = "login" >
    <p > Username < /p> <input type = "text"name = "username"placeholder = "Enter Username"
required >
    <p > Password < /p> <input type = "password"name = "password"placeholder = "Enter Password"
required >
    <
    input type = "submit"
name = "submit"
value = "Login" >
    <
    a href = "../register" > Register ? < /a> <
    /form> <
    /div> <
    script >
    document.login.onsubmit = async (e) => {
        e.preventDefault();
        const response = await fetch("/api/login", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                username: document.login.username.value,
                password: document.login.password.value,
            }),
        });
        if (response.ok) {
            const token = await response.text();
            localStorage.setItem("token", token);
            console.log("ok");
            location.href = "/main/";

        } else {
            const message = await response.text();
            alert(message);
        }
    }; <
/script> <
/body>
